#!/usr/bin/env python3
import ipaddress
import os
import subprocess
import sys

PING_ARG_NIX = "-c 1"
PING_ARG_WIN = "-n 1"

def ping(ip_addr, ping_arg):
    try:
        online = bool(subprocess.check_call(["ping", PING_ARG, ip_addr], stdout=subprocess.DEVNULL) == 0)
    except subprocess.CalledProcessError:
        online = False
    print("ping {} = {}".format(ip_addr, online))
    return online

def ping_sweep(ip):
    for x in range(1,254):
        if ping("{}.{}".format(ip,x)):
            print("{} online".format(ip))

def main():
    if os.name == "nt":
        print("not implemented")
    else:
        net = ipaddress.ip_network("sys.argv[1]")
        for ip_addr in net:
            ping(str(ip_addr, PING_ARG_NIX))

if __name__ == "__main__":
    main()
